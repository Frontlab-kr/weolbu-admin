import{o as I,b as y,p as T,j as R,F as v,s as L,n as P,m as V,k as H}from"./entry.7f5874b1.js";var A={name:"VirtualScroller",emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1},tabindex:{type:Number,default:0}},data(){return{first:this.isBoth()?{rows:0,cols:0}:0,last:this.isBoth()?{rows:0,cols:0}:0,numItemsInViewport:this.isBoth()?{rows:0,cols:0}:0,lastScrollPos:this.isBoth()?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,watch:{numToleratedItems(t){this.d_numToleratedItems=t},loading(t){this.d_loading=t},items(t,e){(!e||e.length!==(t||[]).length)&&this.init()},orientation(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0}},mounted(){this.init(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},methods:{init(){this.setSize(),this.calculateOptions(),this.setSpacerSize()},isVertical(){return this.orientation==="vertical"},isHorizontal(){return this.orientation==="horizontal"},isBoth(){return this.orientation==="both"},scrollTo(t){this.element&&this.element.scrollTo(t)},scrollToIndex(t,e="auto"){const o=this.isBoth(),n=this.isHorizontal(),i=this.first,{numToleratedItems:s}=this.calculateNumItems(),l=this.itemSize,r=(a=0,u)=>a<=u?0:a,c=(a,u)=>a*u,f=(a=0,u=0)=>this.scrollTo({left:a,top:u,behavior:e});if(o){const a={rows:r(t[0],s[0]),cols:r(t[1],s[1])};(a.rows!==i.rows||a.cols!==i.cols)&&f(c(a.cols,l[1]),c(a.rows,l[0]))}else{const a=r(t,s);a!==i&&(n?f(c(a,l),0):f(0,c(a,l)))}},scrollInView(t,e,o="auto"){if(e){const n=this.isBoth(),i=this.isHorizontal(),{first:s,viewport:l}=this.getRenderedRange(),r=(a=0,u=0)=>this.scrollTo({left:a,top:u,behavior:o}),c=e==="to-start",f=e==="to-end";if(c){if(n)l.first.rows-s.rows>t[0]?r(l.first.cols*this.itemSize[1],(l.first.rows-1)*this.itemSize[0]):l.first.cols-s.cols>t[1]&&r((l.first.cols-1)*this.itemSize[1],l.first.rows*this.itemSize[0]);else if(l.first-s>t){const a=(l.first-1)*this.itemSize;i?r(a,0):r(0,a)}}else if(f){if(n)l.last.rows-s.rows<=t[0]+1?r(l.first.cols*this.itemSize[1],(l.first.rows+1)*this.itemSize[0]):l.last.cols-s.cols<=t[1]+1&&r((l.first.cols+1)*this.itemSize[1],l.first.rows*this.itemSize[0]);else if(l.last-s<=t+1){const a=(l.first+1)*this.itemSize;i?r(a,0):r(0,a)}}}else this.scrollToIndex(t,o)},getRenderedRange(){const t=(n,i)=>Math.floor(n/(i||n));let e=this.first,o=0;if(this.element){const n=this.isBoth(),i=this.isHorizontal(),s=this.element.scrollTop,l=this.element.scrollLeft;n?(e={rows:t(s,this.itemSize[0]),cols:t(l,this.itemSize[1])},o={rows:e.rows+this.numItemsInViewport.rows,cols:e.cols+this.numItemsInViewport.cols}):(e=t(i?l:s,this.itemSize),o=e+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:e,last:o}}},calculateNumItems(){const t=this.isBoth(),e=this.isHorizontal(),o=this.itemSize,n=this.getContentPosition(),i=this.element?this.element.offsetWidth-n.left:0,s=this.element?this.element.offsetHeight-n.top:0,l=(a,u)=>Math.ceil(a/(u||a)),r=a=>Math.ceil(a/2),c=t?{rows:l(s,o[0]),cols:l(i,o[1])}:l(e?i:s,o),f=this.d_numToleratedItems||(t?[r(c.rows),r(c.cols)]:r(c));return{numItemsInViewport:c,numToleratedItems:f}},calculateOptions(){const t=this.isBoth(),e=this.first,{numItemsInViewport:o,numToleratedItems:n}=this.calculateNumItems(),i=(l,r,c,f)=>this.getLast(l+r+(l<c?2:3)*c,f),s=t?{rows:i(e.rows,o.rows,n[0]),cols:i(e.cols,o.cols,n[1],!0)}:i(e,o,n);this.last=s,this.numItemsInViewport=o,this.d_numToleratedItems=n,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=t?Array.from({length:o.rows}).map(()=>Array.from({length:o.cols})):Array.from({length:o})),this.lazy&&this.$emit("lazy-load",{first:e,last:s})},getLast(t=0,e){return this.items?Math.min(e?(this.columns||this.items[0]).length:this.items.length,t):0},getContentPosition(){if(this.content){const t=getComputedStyle(this.content),e=parseInt(t.paddingLeft,10)+Math.max(parseInt(t.left,10),0),o=parseInt(t.paddingRight,10)+Math.max(parseInt(t.right,10),0),n=parseInt(t.paddingTop,10)+Math.max(parseInt(t.top,10),0),i=parseInt(t.paddingBottom,10)+Math.max(parseInt(t.bottom,10),0);return{left:e,right:o,top:n,bottom:i,x:e+o,y:n+i}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize(){if(this.element){const t=this.isBoth(),e=this.isHorizontal(),o=this.element.parentElement,n=this.scrollWidth||`${this.element.offsetWidth||o.offsetWidth}px`,i=this.scrollHeight||`${this.element.offsetHeight||o.offsetHeight}px`,s=(l,r)=>this.element.style[l]=r;t||e?(s("height",i),s("width",n)):s("height",i)}},setSpacerSize(){const t=this.items;if(t){const e=this.isBoth(),o=this.isHorizontal(),n=this.getContentPosition(),i=(s,l,r,c=0)=>this.spacerStyle={...this.spacerStyle,[`${s}`]:(l||[]).length*r+c+"px"};e?(i("height",t,this.itemSize[0],n.y),i("width",this.columns||t[1],this.itemSize[1],n.x)):o?i("width",this.columns||t,this.itemSize,n.x):i("height",t,this.itemSize,n.y)}},setContentPosition(t){if(this.content){const e=this.isBoth(),o=this.isHorizontal(),n=t?t.first:this.first,i=(l,r)=>l*r,s=(l=0,r=0)=>{this.contentStyle={...this.contentStyle,transform:`translate3d(${l}px, ${r}px, 0)`}};if(e)s(i(n.cols,this.itemSize[1]),i(n.rows,this.itemSize[0]));else{const l=i(n,this.itemSize);o?s(l,0):s(0,l)}}},onScrollPositionChange(t){const e=t.target,o=this.isBoth(),n=this.isHorizontal(),i=this.getContentPosition(),s=(h,m)=>h?h>m?h-m:h:0,l=(h,m)=>Math.floor(h/(m||h)),r=(h,m,d,w,g,S)=>h<=g?g:S?d-w-g:m+g-1,c=(h,m,d,w,g,S,C)=>h<=S?0:Math.max(0,C?h<m?d:h-S:h>m?d:h-2*S),f=(h,m,d,w,g,S)=>{let C=m+w+2*g;return h>=g&&(C+=g+1),this.getLast(C,S)},a=s(e.scrollTop,i.top),u=s(e.scrollLeft,i.left);let p=o?{rows:0,cols:0}:0,z=this.last,B=!1,b=this.lastScrollPos;if(o){const h=this.lastScrollPos.top<=a,m=this.lastScrollPos.left<=u,d={rows:l(a,this.itemSize[0]),cols:l(u,this.itemSize[1])},w={rows:r(d.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],h),cols:r(d.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],m)};p={rows:c(d.rows,w.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],h),cols:c(d.cols,w.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],m)},z={rows:f(d.rows,p.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:f(d.cols,p.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},B=p.rows!==this.first.rows||z.rows!==this.last.rows||p.cols!==this.first.cols||z.cols!==this.last.cols,b={top:a,left:u}}else{const h=n?u:a,m=this.lastScrollPos<=h,d=l(h,this.itemSize),w=r(d,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,m);p=c(d,w,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,m),z=f(d,p,this.last,this.numItemsInViewport,this.d_numToleratedItems),B=p!==this.first||z!==this.last,b=h}return{first:p,last:z,isRangeChanged:B,scrollPos:b}},onScrollChange(t){const{first:e,last:o,isRangeChanged:n,scrollPos:i}=this.onScrollPositionChange(t);if(n){const s={first:e,last:o};this.setContentPosition(s),this.first=e,this.last=o,this.lastScrollPos=i,this.$emit("scroll-index-change",s),this.lazy&&this.$emit("lazy-load",s)}},onScroll(t){if(this.$emit("scroll",t),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:e}=this.onScrollPositionChange(t);e&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(t),this.d_loading&&this.showLoader&&!this.lazy&&(this.d_loading=!1)},this.delay)}else this.onScrollChange(t)},getOptions(t){const e=(this.items||[]).length,o=this.isBoth()?this.first.rows+t:this.first+t;return{index:o,count:e,first:o===0,last:o===e-1,even:o%2===0,odd:o%2!==0}},getLoaderOptions(t,e){let o=this.loaderArr.length;return{index:t,count:o,first:t===0,last:t===o-1,even:t%2===0,odd:t%2!==0,...e}},elementRef(t){this.element=t},contentRef(t){this.content=t}},computed:{containerClass(){return["p-virtualscroller",{"p-both-scroll":this.isBoth(),"p-horizontal-scroll":this.isHorizontal()},this.class]},contentClass(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass(){return["p-virtualscroller-loader",{"p-component-overlay":!this.$slots.loader}]},loadedItems(){const t=this.items;return t&&!this.d_loading?this.isBoth()?t.slice(this.first.rows,this.last.rows).map(e=>this.columns?e:e.slice(this.first.cols,this.last.cols)):this.isHorizontal()&&this.columns?t:t.slice(this.first,this.last):[]},loadedRows(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns(){if(this.columns){const t=this.isBoth(),e=this.isHorizontal();if(t||e)return this.d_loading&&this.loaderDisabled?t?this.loaderArr[0]:this.loaderArr:this.columns.slice(t?this.first.cols:this.first,t?this.last.cols:this.last)}return this.columns}}};const N=["tabindex"],k={key:1,class:"p-virtualscroller-loading-icon pi pi-spinner pi-spin"};function O(t,e,o,n,i,s){return o.disabled?(I(),y(v,{key:1},[T(t.$slots,"default"),T(t.$slots,"content",{items:o.items,rows:o.items,columns:s.loadedColumns})],64)):(I(),y("div",{key:0,ref:s.elementRef,class:P(s.containerClass),tabindex:o.tabindex,style:V(o.style),onScroll:e[0]||(e[0]=(...l)=>s.onScroll&&s.onScroll(...l))},[T(t.$slots,"content",{styleClass:s.contentClass,items:s.loadedItems,getItemOptions:s.getOptions,loading:i.d_loading,getLoaderOptions:s.getLoaderOptions,itemSize:o.itemSize,rows:s.loadedRows,columns:s.loadedColumns,contentRef:s.contentRef,spacerStyle:i.spacerStyle,contentStyle:i.contentStyle,vertical:s.isVertical(),horizontal:s.isHorizontal(),both:s.isBoth()},()=>[R("div",{ref:s.contentRef,class:P(s.contentClass),style:V(i.contentStyle)},[(I(!0),y(v,null,L(s.loadedItems,(l,r)=>T(t.$slots,"item",{key:r,item:l,options:s.getOptions(r)})),128))],6)]),o.showSpacer?(I(),y("div",{key:0,class:"p-virtualscroller-spacer",style:V(i.spacerStyle)},null,4)):H("",!0),!o.loaderDisabled&&o.showLoader&&i.d_loading?(I(),y("div",{key:1,class:P(s.loaderClass)},[t.$slots&&t.$slots.loader?(I(!0),y(v,{key:0},L(i.loaderArr,(l,r)=>T(t.$slots,"loader",{key:r,options:s.getLoaderOptions(r,s.isBoth()&&{numCols:t.d_numItemsInViewport.cols})})),128)):(I(),y("i",k))],2)):H("",!0)],46,N))}function M(t,e){e===void 0&&(e={});var o=e.insertAt;if(!(!t||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",o==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var x=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}
.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    contain: content;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}
.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}
.p-virtualscroller .p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.p-virtualscroller-loader.p-component-overlay {
    display: flex;
    align-items: center;
    justify-content: center;
}
`;M(x);A.render=O;export{A as default};
